# Chapter 1.2
The CPU is connected to **device controllers** that control one type of **device** through the **system bus**. This is the main communication line of components in the system, and allows access to shared memory. The device controllers may handle multiple devices at once, like usb devices, drives, monitors, etc. The system has **device drivers** that know how to talk to the device controllers. The system bus enables **shared memory**, which is managed by the **memory controller** to avoid collisions between 2 devices(like the CPU and a USB controller).

## Interrupts
In order for the CPU to work with device controllers, which are inherently asynchronous, a mechanism is needed to allow the device controller to **interrupt** the CPU. Between every instruction, the CPU checks a special wire known as the **interrupt request line**. If a signal is received on this wire, it stops processing of whatever it is doing, and starts the **interrupt handler routine**, Which deals with the interrupt. That service stores any CPU state it needs to modify, does the handling, restores the state as it was before the interrupt, and jumps back to continue the CPUs original job. In effect, the program runs like the interrupt never happened.

Different devices, errors and so on, require different handler routines. It is inefficient to have a single megaroutine that deals with them all. For this reason, there is a fixed portion of low memory dedicated to listing pointers to interrupt handler routines for different kinds of interrupts. This is the **interrupt vector**. Since a modern system can have hundreds of these routines, the array generally contains pointers to a list of handlers that are run sequentially until one can handle the interrupt. The CPU reads the **interrupt number**, which is an index in the interrupt vector that points to the list containing the correct handler.

In modern systems, there is more granularity and flexibility in interrupts. Interrupts are **non-maskable** (they interrupt the CPU no matter what) or **maskable**(the CPU can turn off the sensing wire during critical excecution). These are 2 seperate sensing wires. In addition to the **interrupt number**, **interrupt priority** is also sent with the interrupt signal. The CPU can now prioritize and filter interrupts by priority.

## Storage structure
The CPU can only execute code loaded in memory. Since memory is volatile and limited in size, we need secondary storage with a larger capacity. Generally, faster storage is smaller and more expensive. Storage management is therefore important for an efficient system, as there will generally be a little bit of fast memory, and a large amount of slow secondary storage.

## I/O structure
The memory unit simply stores data at addresses with no care for where or what it is storing it. DMA(Direct memory access), allows a device controller to interact with memory in larger blocks without going through the CPU. This allows for a storage or read operation to happen with a lot less interrupts, meaning the CPU can keep busy doing other things.