# Chapter 1.4
## Operating-system Operations
When a system starts, the bootloader must load the OS kernel into memory and start it executing. Usually, some system programs are loaded at boot and run as long as the kernel runs. These are called **daemons**. On Linux, systemd is the first daemon that is started.

The OS will wait for something to do once it is loaded. This almost always means waiting for an interrupt. A **trap** is a type of software interrupt. It could signal an error produced by some software or a **syscall**.

## Multiprogramming and Multitasking
**Multitasking** means that the CPU can execute another program while it's waiting for some I/O response or similar. This means it won't sit idle as long as there is at least one program that needs work done. A running program is called a **process**. **Multitasking** takes this a step further by switching between several processes quickly, ensuring good response times for user satisfaction. This is completely feasibles as CPUs work on a rediculously fast timescale compared to human beings. Deciding when to run what program is the problem of **CPU scheduling**.

The OS can create **virtual memory** to run programs not completely in memory, further improving response time. It also simplifies development by abstracting memory.

Multitasking systems must:
- Provide a file system
- Protect resources from inappropriate use
- Provide mechanisms for synchronization and communication
- Prevent **deadlock**

## Dual-Mode and Multimode Operation
To avoid errant code excecution and free access to the CPU for programs that may be faulty or maliscious,  most systems implemented several operation **modes**. At a minimum, we distinguish between **user mode** and **kernel mode**. The operating system runs code in kernel mode, and user programs are run in user mode. This allows us to distinguish between operating system code and potentially broken or harmful user code. We use a **mode bit** to signalize this. User programs will often require what is referred to as **priviliged instructions**, which may only run in kernel mode. This means the program must make a syscall. The operating system takes control, examines the request, and (if legal) performs the request with data (if any) supplied.

## Timer
If a program never returns control to the OS, either because it is faulty or maliscious, we must ensure that control is eventually returned anyways. To accomplish this we may set a timer that triggers an interrupt in case the program has not returned control to the OS yet. Timer modification is privilaged.